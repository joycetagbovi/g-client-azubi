<div class="p-4">
    <app-navbar title="Welcome Admin ðŸ‘‹ "
        paragraph="Track activity, trends, and popular destinations in real time"></app-navbar>
    <div class="p-6 space-y-6">
        <!-- card -->
        <div class="grid grid-cols-3 gap-8">
            <div class="flex flex-col bg-white rounded-[20px] custom-shadow p-6">
                <h2 class="text-[16px] font-medium mb-4 text-custom-dark">Total Learner</h2>
                <div class="flex items-center justify-between">
                    <!-- Bind the learner count from the signal -->
                    <p class="text-[36px] font-semibold text-custom-black">
                        {{ dashboardStats()?.totalLearners || 0 | number }}
                    </p>
                    <img src="/assets/icons/Vector.svg" alt="Users Icon" class="w-12 h-12">
                </div>
                <p class="text-[14px] text-custom-grey mt-2 font-medium">
                    <span [ngClass]="getGrowthClass(dashboardStats()?.learnerGrowth || 0)">
                        <fa-icon [icon]="getGrowthIcon(dashboardStats()?.learnerGrowth || 0)"
                            class="text-[14px]"></fa-icon>
                        {{ formatGrowth(dashboardStats()?.learnerGrowth || 0) }}
                    </span>
                    vs from last month
                </p>
            </div>
            <div class="flex flex-col bg-white rounded-[20px] custom-shadow p-6">
                <h2 class="text-[16px] font-medium mb-4 text-custom-dark">Revenue</h2>
                <div class="flex items-center justify-between">
                    <!-- Bind the total revenue from the signal -->
                    <p class="text-[36px] font-semibold text-custom-black">
                        {{ dashboardStats()?.totalRevenue || 0 | currency:'USD':'symbol':'1.0-0' }}
                    </p>
                    <img src="/assets/icons/currency-dollar.svg" alt="Users Icon" class="w-12 h-12">
                </div>
                <p class="text-[14px] text-custom-grey mt-2 font-medium">
                    <span [ngClass]="getGrowthClass(dashboardStats()?.revenueGrowth || 0)">
                        <fa-icon [icon]="getGrowthIcon(dashboardStats()?.revenueGrowth || 0)"
                            class="text-[14px]"></fa-icon>
                        {{ formatGrowth(dashboardStats()?.revenueGrowth || 0) }}
                    </span>
                    from last month
                </p>
            </div>
            <div class="flex flex-col bg-white rounded-[20px] custom-shadow p-6">
                <h2 class="text-[16px] font-medium mb-4 text-custom-dark">Invoice</h2>
                <div class="flex items-center justify-between">
                    <!-- Bind the total invoices from the signal -->
                    <p class="text-[36px] font-semibold text-custom-black">
                        {{ dashboardStats()?.totalInvoices || 0 | number }}
                    </p>
                    <img src="/assets/icons/Frame.svg" alt="Users Icon" class="w-12 h-12">
                </div>
                <p class="text-[14px] text-custom-grey mt-2 font-medium">
                    <span [ngClass]="getGrowthClass(dashboardStats()?.invoiceGrowth || 0)">
                        <fa-icon [icon]="getGrowthIcon(dashboardStats()?.invoiceGrowth || 0)"
                            class="text-[14px]"></fa-icon>
                        {{ formatGrowth(dashboardStats()?.invoiceGrowth || 0) }}
                    </span>
                    from last month
                </p>
            </div>
        </div>
        <!-- track cards -->
        <div class="">
            <h4 class="text-[20px] text-custom-black font-semibold mb-3">Tracks</h4>
            <div class=" grid grid-cols-4 gap-8">
                <app-track-card *ngFor="let track of tracks() | slice:0:4" [image]="track.image" [name]="track.name"
                    [price]="track.price " [duration]="track.duration"></app-track-card>
            </div>
        </div>
        <!-- recent active -->
        <div class="grid grid-cols-2 gap-8">
            <div class="bg-white rounded-[20px] custom-shadow p-6">
                <h2 class="text-[20px] font-semibold text-custom-black mb-4">Recent Revenue</h2>
                <hr class="border-[0.5px] border-custom-grey">
                <!-- Pass revenue data to the chart component -->
                 <div class="mt-6">
                <app-chart [data]="revenueData()"></app-chart>
                </div>
            </div>
            <!-- lastest invoice -->
            <div class="bg-white rounded-[20px] custom-shadow p-6">
                <h2 class="text-[20px] font-semibold text-custom-black mb-4">Latest Invoice</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Name
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Amount
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr class="text-black" *ngFor="let invoice of latestInvoices()">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex gap-3 items-center">
                                        <img class="w-[40px] h-[40px] rounded-full object-cover"
                                            [src]="invoice.learner.profileImage || 'https://primefaces.org/cdn/primeng/images/demo/avatar/onyamalimba.png'"
                                            [alt]="invoice.learner.firstName" />
                                        <span>{{ invoice.learner.firstName }} {{ invoice.learner.lastName}}</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">{{ invoice.amount |
                                    currency:'USD':'symbol':'1.2-2' }}</td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>